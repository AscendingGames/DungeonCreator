sudo: required
language: android
jdk: oraclejdk8
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -rf $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches"
  - "$HOME/.gradle/wrapper/"
  - "$HOME/.android/build-cache"
android:
  components:
  - tools
  - tools
  - platform-tools
  - build-tools-28.0.2
  - android-28
before_install:
- openssl aes-256-cbc -K $encrypted_8c3bfc17a2d7_key -iv $encrypted_8c3bfc17a2d7_iv
  -in keystore.jks.enc -out keystore.jks -d
- yes | sdkmanager "platforms;android-28"
- chmod +x gradlew
script:
- "./gradlew clean test build"
after_success:
- bash <(curl -s https://codecov.io/bash)
deploy:
  provider: releases
  api_key:
    secure: p+dbCE9zCUpkUEQGdMKnrQraKQVT/Iy4UnWUinI/cZU3ehkB/yIYvxteS38v3IGNZ3tA1z/4a/BfGJ/EJME0SOkKXfaF6ZpoQRHl/gH+1uLRNY2XUDpFWvLE4KOHp6byF21j3Mq/c7h656/q4TxL/++E1TVXPCSDVONrGphcK2bcmGikhkGm58KQkci95ioyeSTgE8dTWw1KSKBsJBXQQ90m92ZA+rFFFA2uHQ/4n8iGKajpVyFPqi+QFDUEPXp4/QyXSQQAXFt7w+w7Huqr2fkQcTNZqhBMzly1kQafHM/EEACpV2rNWqnO41dNkYR1WVGpItpVhhqCJSJ5OSYVr0C/UMJ4WgapnTFjxtOXy9Rm14/mBY6VjxJ/PMAvTbmdw3g9RqTYF5Yj8rs2gff4862vU8n0+iS9CIewlfBmokYu48x9bPUZMP12EqqLFJuWtrmsIkrsF7dHmOy2ktKxi4JytloYnpALJmja7GwRczY4Jp0LjgIYpz5qv0QOs+7uMVa35gXNjwLVDt69lCzII4tbZI4ejjiQqKFeXaxD3O/pfwwxOot2cnRK4gRkEft+L6zj77Ht1rF6bUKFPKT4j7bIvImZDO+8uesbdSm9f+RY7ew1p/1NF1Eo4K03o/XmI3miSTs/ds05bqBuBzeyKU2v9rQD+L0hqIRE52BKZqM=
  file: android/release/android-release.apk
  on:
    repo: AscendingGames/DungeonCreator
    branch: development
env:
  global:
  - secure: dTN1lhVwZ5WFMbDKyqIoJVMTYyxpjljq+1BJHHbu2g3vCQ6fwFSWaF3XwjL/hbQQ/Aw5fSZ25szxTu8tdBl4OkPvWYm/lsTpSZM9hLujtUUbLRWvnSVccdwXyuivz+3CgwKTnuDtMP1iNETxELrsdlUGnlNYyeidthgJHUxQDZ8vrg0UbkybNyd8lFuTiwgRELrHia9B1iJ/H2qIp2cMm+elbjF8zdZPZ6/U4gtA/QH3oIKRA45hX+4LPB2JZ358n0SvUUjMCmu+qoNbDZPdDG0P3G4QPuGvPOMj7s1vyGaDoRRvtZX1p0dqSKJcq46oKo/+zCiMybrNLNy60EpnZEdfY6RktDLypwKZM7+/XP0tqvyD7atn6P54mfJVXMZv8mgOb59ehKaYB+xDU9yjVw5xHR+THiyMm+joLsKudp5vtcYWe9oSpIT/vGA+ROXJoi/eKTZaX8nSOmqig3h6q9ZP/+Ertd25CvR98KsOJSkkiefs2Awo6O7jZQdpFvfixiaTPalntV8dVnGHL6nmuqLAt2n6OugnSAg6yh43UQXMASxGkgtXak2Emx8WOfrNp7Ce7EOlfZ4TI6GkgRhauQyzHM6ihAGR02uH0B5ylABM8dICkntsmddXvtidTzQx5NdyoPySXlANc6PMmMXvrH6agN3JmBMECXcY56jFUi0=
  - secure: Vf1kZ/Pf/8mFvDCJfLGKTWAaj4faTyurHEwFMbSCGncUivS22aqpSX4AXPCqKxUvNqvHI2WmULvCIrm0dLc45FjWAI9wAMRcvDx/gqiV6ICebg2yExxgklSulBj+DmH+vtItARBgTScsaWePk+/KqV1AlwdHaXK+5qBzfQpZXXa0Lx9/EzpCw9vE11q7G8XCg/I3yYgdAQs4G5sLgWpPoixnlMpDCdqJBTD7bAYsoqaVJZ8wVeD584WU3oJjv9mSii3tUnGQYKfMAJ6WxRzt2KZEXqk0/+ehvQiA35N+elYXkchEID5cwl3okZK430NSQJVwVpO0FfZQOE52RH0+3i4FOsqyD4uJ1FmXLCj8ZWYaTWEzfhosqFxmMGBN4q6z3jCFIGV13y574IEBerOFCO6wyQdHbBWv7JtibbuvFnXQwYCx+FlNYKcChKpavYO7J5sIray4TXaRtWAD5n+Ope3Am1iUYI3N5iOC+jwA0mo3HCVCaiwmwQGcBTZan6JZnt5O74J8K3FlouzFxwa0Zq0PGfEHjUtyoPpKtpiP/6hBkTazgc6XwRzRIzY/DtTFplUfVX85XIkV1pxNBl3P+nscsAvbjPJWSTXoOhslcxnMCjLXq7qROngzGULdcE9YjqJvdabHSe6HhZ6ENqzmFQDJ3fv4Xmte99ZHtYtyuu0=
